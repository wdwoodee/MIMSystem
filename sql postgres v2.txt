CREATE TABLE users(
id serial,
username character varying,
password character varying,
PRIMARY KEY(id)
);

CREATE TABLE members(
id serial,
username character varying,
mobile character varying,
PRIMARY KEY(id)
);

CREATE TABLE consumpationsummary(
id serial,
mid serial references members(id),
contimes integer,
totalconamount integer,
totalintegral integer,
PRIMARY KEY(id)
);

CREATE TABLE consumpationdetail(
id serial,
mid serial references members(id),
contype character varying,
conamount integer,
integralchange integer,
contime timestamp with time zone,
PRIMARY KEY(id)
);

CREATE TABLE consumpationcategory(
id serial,
conype character varying,
PRIMARY KEY(id)
);

CREATE INDEX index_user ON users (username);
CREATE INDEX index_members1 ON members (username);
CREATE INDEX index_members2 ON members (mobile);

CREATE INDEX index_user2 ON users (id);
CREATE INDEX index_members3 ON members (id);
CREATE INDEX index_consumpationsummary ON consumpationsummary (id);
CREATE INDEX index_consumpationcategory ON consumpationcategory (id);
CREATE INDEX index_consumpationdetail ON consumpationdetail (id);

drop index index_user;
drop index index_customer;
drop index index_integral;
drop index index_category;

customer -> consumpationsummary

integer -> consumpationdetail

category -> consumpationcategory
